#
# OpenWrt Configuration for Xiaomi Redmi AX6000
# 全功能修改版 (Full-Featured Version)
#

# =========================================
# Target / Device
# (无修改)
# =========================================
# =========================================
# Target / Device
# (已根据 OpenWrt main 分支修改为 filogic 目标)
# =========================================
CONFIG_TARGET_mediatek=y
CONFIG_TARGET_mediatek_filogic=y
CONFIG_TARGET_DEVICE_mediatek_filogic_DEVICE_xiaomi_redmi-router-ax6000=y
CONFIG_TARGET_ROOTFS_SQUASHFS=y
CONFIG_TARGET_ROOTFS_TARGZ=y
CONFIG_TARGET_MULTI_PROFILE=y
CONFIG_TARGET_PER_DEVICE_ROOTFS=y
CONFIG_HAS_SUBTARGETS=y

# =========================================
# Core Network & System
# (增加了 IPv6 支持)
# =========================================
CONFIG_PACKAGE_kmod-tun=y
CONFIG_PACKAGE_kmod-inet-diag=y
CONFIG_PACKAGE_kmod-nft-socket=y
CONFIG_PACKAGE_kmod-nft-tproxy=y
CONFIG_PACKAGE_ip-full=y
CONFIG_PACKAGE-firewall4=y
CONFIG_PACKAGE-ca-bundle=y
CONFIG_PACKAGE-curl=y
CONFIG_PACKAGE-yq=y
CONFIG_PACKAGE-ethtool=y
CONFIG_PACKAGE_kmod-ipv6=y          # <--- 新增: IPv6 核心支持

# =========================================
# Wireless
# (修改: 升级为 wpad-openssl 以支持 802.11r/k/v)
# (修正: 移除了错误的 mt76x8 和冗余的包)
# =========================================
CONFIG_PACKAGE_wpad-openssl=y      # <--- 修改: 替换 wpad-basic-wolfssl，提供完整的 802.11r/k/v 漫游支持
CONFIG_PACKAGE-iptables-mod-tproxy=y # (保留: AdGuardHome 可能需要)
# --- 已移除 CONFIG_PACKAGE-mac80211 (冗余)
# --- 已移除 CONFIG_PACKAGE-mt76x8 (错误)
# --- 已移除 CONFIG_PACKAGE-hostapd (冗余)

# =========================================
# LuCI Web Interface
# (增加: 防火墙、软件包、IPv6 的 Web 界面)
# =========================================
CONFIG_PACKAGE_luci=y
CONFIG_PACKAGE_luci-base=y
CONFIG_PACKAGE_luci-mod-admin-full=y
CONFIG_PACKAGE_luci-theme-bootstrap=y
CONFIG_PACKAGE_luci-ssl=y
CONFIG_PACKAGE_uhttpd=y
CONFIG_PACKAGE_uhttpd-mod-ubus=y
CONFIG_PACKAGE_luci-app-uhttpd=y
CONFIG_PACKAGE_luci-app-firewall=y   # <--- 新增: 恢复 LuCI 防火墙界面
CONFIG_PACKAGE_luci-app-opkg=y       # <--- 新增: 恢复 LuCI 软件包界面
CONFIG_PACKAGE_luci-proto-ipv6=y     # <--- 新增: LuCI 的 IPv6 支持

# =========================================
# LuCI Applications
# (新增: 恢复所有常见的 LuCI 应用)
# =========================================
CONFIG_PACKAGE_luci-app-ddns=y        # <--- 新增: 动态 DNS
CONFIG_PACKAGE_luci-app-upnp=y        # <--- 新增: UPnP
CONFIG_PACKAGE_luci-app-wol=y         # <--- 新增: 网络唤醒
CONFIG_PACKAGE_luci-app-watchcat=y    # <--- 新增: 断线重连
CONFIG_PACKAGE_luci-app-qos=y         # <--- 新增: 服务质量
CONFIG_PACKAGE_luci-app-samba4=y      # <--- 新增: 文件共享 (Samba 4)
CONFIG_PACKAGE_luci-app-transmission=y # <--- 新增: 迅雷/BT 下载

# =========================================
# USB Support
# (新增: 完整的 USB 驱动和文件系统支持)
# =========================================
CONFIG_PACKAGE_block-mount=y           # <--- 新增: 自动挂载
CONFIG_PACKAGE_kmod-usb-storage=y    # <--- 新增: USB 存储驱动
CONFIG_PACKAGE_kmod-usb-storage-uas=y # <--- 新增: USB 3.0 加速 (UAS)
CONFIG_PACKAGE_kmod-usb3=y           # <--- 新增: USB 3.0 驱动
CONFIG_PACKAGE_kmod-fs-ext4=y        # <--- 新增: ext4 文件系统
CONFIG_PACKAGE_kmod-fs-vfat=y        # <--- 新增: FAT32 文件系统
CONFIG_PACKAGE_kmod-fs-exfat=y       # <--- 新增: exFAT 文件系统
CONFIG_PACKAGE_kmod-fs-ntfs3=y       # <--- 新增: NTFS 文件系统 (高性能内核驱动)

# =========================================
# User Plugins
# (保留: 自动重启, AdGuardHome, nikki)
# =========================================
CONFIG_PACKAGE_autoreboot=y
CONFIG_PACKAGE_autoreboot-cron=y
CONFIG_PACKAGE_adguardhome=y
CONFIG_PACKAGE_luci-app-adguardhome=y
CONFIG_PACKAGE_nikki=y

# =========================================
# Minimal Optimizations (disable unnecessary packages)
# (此部分已移除，因为所有功能均已恢复)
# =========================================

# =========================================
# Build Options
# (无修改)
# =========================================
CONFIG_DEVEL=y
CONFIG_BUILD_PATENTED=y
CONFIG_BUILD_PRELOAD=y
