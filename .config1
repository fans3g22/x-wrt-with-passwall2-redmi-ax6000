# =========================================
# Target / Device (Redmi AX6000)
# =========================================
CONFIG_TARGET_mediatek=y
CONFIG_TARGET_mediatek_filogic=y
CONFIG_TARGET_DEVICE_mediatek_filogic_DEVICE_xiaomi_redmi-router-ax6000=y
CONFIG_TARGET_ROOTFS_SQUASHFS=y
CONFIG_TARGET_ROOTFS_TARGZ=y

# =========================================
# Usteer & WiFi Roaming (新增)
# ref: https://openwrt.org/docs/guide-user/network/wifi/usteer
# =========================================
# usteer 核心组件
CONFIG_PACKAGE_usteer=y
# usteer LuCI 配置界面
CONFIG_PACKAGE_luci-app-usteer=y
# 确保使用支持 802.11k/v 的 hostapd 版本 (wpad-openssl 是最佳选择)
CONFIG_PACKAGE_wpad-openssl=y
CONFIG_PACKAGE_hostapd-utils=y
# 移除基础版本以避免冲突
# CONFIG_PACKAGE_wpad-basic is not set
# CONFIG_PACKAGE_wpad-basic-wolfssl is not set

# =========================================
# Fix: Resolve Recursive Dependency (关键修复)
# 禁用 autosamba 和 ksmbd 以解决编译死循环
# =========================================
CONFIG_PACKAGE_luci-app-samba4=y
# CONFIG_PACKAGE_autosamba is not set
# CONFIG_PACKAGE_kmod-fs-ksmbd is not set
# CONFIG_PACKAGE_ksmbd-server is not set
# CONFIG_PACKAGE_luci-app-ksmbd is not set

# =========================================
# Core Network & System & IPv6
# =========================================
CONFIG_PACKAGE_kmod-ipv6=y
CONFIG_PACKAGE_ipv6helper=y
CONFIG_PACKAGE_luci-proto-ipv6=y
CONFIG_PACKAGE_dnsmasq_full_dhcpv6=y
CONFIG_PACKAGE_6in4=y
CONFIG_PACKAGE_6rd=y
CONFIG_PACKAGE_6to4=y
CONFIG_PACKAGE_kmod-tun=y
CONFIG_PACKAGE_kmod-inet-diag=y
CONFIG_PACKAGE_kmod-nft-socket=y
CONFIG_PACKAGE_kmod-nft-tproxy=y
CONFIG_PACKAGE_ip-full=y
CONFIG_PACKAGE_firewall4=y
CONFIG_PACKAGE_ca-bundle=y
CONFIG_PACKAGE_curl=y
CONFIG_PACKAGE_ethtool=y
CONFIG_PACKAGE_htop=y
CONFIG_PACKAGE_nano=y

# =========================================
# LuCI Web Interface & Applications
# =========================================
CONFIG_PACKAGE_luci=y
CONFIG_PACKAGE_luci-base=y
CONFIG_PACKAGE_luci-mod-admin-full=y
CONFIG_PACKAGE_luci-theme-bootstrap=y
CONFIG_PACKAGE_luci-ssl=y
CONFIG_PACKAGE_uhttpd=y
CONFIG_PACKAGE_uhttpd-mod-ubus=y
CONFIG_PACKAGE_luci-app-uhttpd=y
CONFIG_PACKAGE_luci-app-firewall=y
CONFIG_PACKAGE_luci-app-opkg=y
CONFIG_PACKAGE_luci-app-ddns=y
CONFIG_PACKAGE_luci-app-upnp=y
CONFIG_PACKAGE_luci-app-wol=y
CONFIG_PACKAGE_luci-app-watchcat=y
CONFIG_PACKAGE_luci-app-qos=y
CONFIG_PACKAGE_luci-app-transmission=y

# =========================================
# USB & Filesystem Support
# =========================================
CONFIG_PACKAGE_block-mount=y
CONFIG_PACKAGE_kmod-usb2=y
CONFIG_PACKAGE_kmod-usb3=y
CONFIG_PACKAGE_kmod-usb-storage=y
CONFIG_PACKAGE_kmod-usb-storage-uas=y
CONFIG_PACKAGE_kmod-fs-ext4=y
CONFIG_PACKAGE_kmod-fs-vfat=y
CONFIG_PACKAGE_kmod-fs-exfat=y
CONFIG_PACKAGE_kmod-fs-ntfs3=y

# =========================================
# User Plugins
# =========================================
CONFIG_PACKAGE_autoreboot=y
CONFIG_PACKAGE_autoreboot-cron=y
CONFIG_PACKAGE_nikki=y
# 确保 Passwall 相关依赖被选中 (如果仓库 feeds 包含它)
CONFIG_PACKAGE_luci-app-passwall=y

# =========================================
# Build Options
# =========================================
CONFIG_DEVEL=y
CONFIG_BUILD_PATENTED=y
CONFIG_BUILD_PRELOAD=y
